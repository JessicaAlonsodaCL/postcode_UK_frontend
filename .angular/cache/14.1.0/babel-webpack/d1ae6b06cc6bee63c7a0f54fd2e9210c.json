{"ast":null,"code":"import { map } from 'rxjs/operators';\nimport { Postcode } from './shared/postcode.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./app-service.service\";\nimport * as i2 from \"@angular/google-maps\";\nimport * as i3 from \"@angular/common\";\n\nfunction AppComponent_map_marker_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"map-marker\", 12);\n  }\n\n  if (rf & 2) {\n    const marker_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"position\", marker_r4.position);\n  }\n}\n\nfunction AppComponent_map_directions_renderer_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"map-directions-renderer\", 13);\n  }\n\n  if (rf & 2) {\n    const directionsResults_r5 = ctx.ngIf;\n    i0.ɵɵproperty(\"directions\", directionsResults_r5);\n  }\n}\n\nfunction AppComponent_a_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 14)(1, \"label\", 2);\n    i0.ɵɵtext(2, \"postcode:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementStart(4, \"label\", 2);\n    i0.ɵɵtext(5, \"Lat.:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementStart(7, \"label\", 2);\n    i0.ɵɵtext(8, \"Longitude.:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const postcode_r6 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", postcode_r6.postcode, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" (\", postcode_r6.latitude, \") \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", postcode_r6.longitude, \" \");\n  }\n}\n\nexport class AppComponent {\n  constructor(service, mapDirectionsService) {\n    this.service = service;\n    this.title = 'postcodes-app';\n    this.postcodes = [];\n    this.postcode = '';\n    this.markers = [];\n    this.zoom = 14;\n    const request = {\n      destination: {\n        lat: 12,\n        lng: 4\n      },\n      origin: {\n        lat: 14,\n        lng: 8\n      },\n      travelMode: google.maps.TravelMode.DRIVING\n    };\n    this.directionsResults$ = mapDirectionsService.route(request).pipe(map(response => response.result));\n  }\n\n  ngOnInit() {}\n\n  onEnter(value) {\n    this.postcode = value;\n    this.validatePostcode(this.postcode);\n  }\n\n  getDataFromAPI(postcode) {\n    this.service.getData(postcode).pipe(map(res => JSON.parse(JSON.stringify(res)))).subscribe({\n      next: response => {\n        console.log('Response from API is ', response);\n\n        if (this.postcodes.length < 3) {\n          this.postcodes.push(new Postcode(response.postcode, response.latitude, response.longitude, response.country, response.region));\n        } else {\n          this.postcodes.shift();\n          this.postcodes.push(new Postcode(response.postcode, response.latitude, response.longitude, response.country, response.region));\n        }\n\n        this.changePositionMap(response.latitude, response.longitude);\n      },\n      error: error => {\n        console.log('Error is', error);\n      }\n    });\n  }\n\n  validatePostcode(postcode) {\n    this.service.validatePostcodeService(postcode).subscribe({\n      next: response => {\n        if (response) {\n          this.getDataFromAPI(postcode);\n        } else {\n          alert('Enter a valid postal code');\n        }\n      },\n      error: error => {\n        console.log('Error is', error);\n      }\n    });\n  }\n\n  changePositionMap(lat, long) {\n    this.center = {\n      lat: lat,\n      lng: long\n    };\n    this.markers.push({\n      position: {\n        lat: lat,\n        lng: long\n      }\n    });\n  }\n\n  moveMap(event) {\n    if (event.latLng != null) this.center = event.latLng.toJSON();\n  }\n\n  move(event) {\n    if (event.latLng != null) this.display = event.latLng.toJSON();\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.AppServiceService), i0.ɵɵdirectiveInject(i2.MapDirectionsService));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 20,\n  vars: 7,\n  consts: [[1, \"form-group\", \"row\"], [1, \"col-xs-12\"], [1, \"control-label\"], [1, \"sr-only\"], [\"type\", \"postcode\", \"id\", \"inputPassword2\", \"placeholder\", \"Postcode\", 1, \"form-control\", 3, \"keyup.enter\"], [\"postcode\", \"\"], [1, \"row\"], [\"height\", \"400px\", \"width\", \"1140px\", 3, \"center\", \"zoom\", \"mapClick\", \"mapMousemove\"], [3, \"position\", 4, \"ngFor\", \"ngForOf\"], [3, \"directions\", 4, \"ngIf\"], [1, \"list-group\"], [\"class\", \"list-group-item\", \"style\", \"cursor: pointer\", 4, \"ngFor\", \"ngForOf\"], [3, \"position\"], [3, \"directions\"], [1, \"list-group-item\", 2, \"cursor\", \"pointer\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r7 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"label\", 2);\n      i0.ɵɵtext(3, \"Postcode:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"label\", 3);\n      i0.ɵɵtext(5, \"Postcode\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"input\", 4, 5);\n      i0.ɵɵlistener(\"keyup.enter\", function AppComponent_Template_input_keyup_enter_6_listener() {\n        i0.ɵɵrestoreView(_r7);\n\n        const _r0 = i0.ɵɵreference(7);\n\n        return i0.ɵɵresetView(ctx.onEnter(_r0.value));\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(8, \"br\");\n      i0.ɵɵelementStart(9, \"div\", 6)(10, \"div\", 1)(11, \"google-map\", 7);\n      i0.ɵɵlistener(\"mapClick\", function AppComponent_Template_google_map_mapClick_11_listener($event) {\n        return ctx.moveMap($event);\n      })(\"mapMousemove\", function AppComponent_Template_google_map_mapMousemove_11_listener($event) {\n        return ctx.move($event);\n      });\n      i0.ɵɵtemplate(12, AppComponent_map_marker_12_Template, 1, 1, \"map-marker\", 8);\n      i0.ɵɵtemplate(13, AppComponent_map_directions_renderer_13_Template, 1, 1, \"map-directions-renderer\", 9);\n      i0.ɵɵpipe(14, \"async\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(15, \"div\", 6)(16, \"div\", 1);\n      i0.ɵɵelement(17, \"hr\");\n      i0.ɵɵelementStart(18, \"ul\", 10);\n      i0.ɵɵtemplate(19, AppComponent_a_19_Template, 10, 3, \"a\", 11);\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"center\", ctx.center)(\"zoom\", ctx.zoom);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.markers);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(14, 5, ctx.directionsResults$));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.postcodes);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i2.GoogleMap, i2.MapDirectionsRenderer, i2.MapMarker, i3.AsyncPipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"AAEA,SAASA,GAAT,QAAmB,gBAAnB;AACA,SAASC,QAAT,QAAyB,yBAAzB;;;;;;;;ICeMC;;;;;IACYA;;;;;;IAEZA;;;;;IACyBA;;;;;;IASzBA,8BACsC,CADtC,EACsC,OADtC,EACsC,CADtC;IAG+BA;IAASA;IACtCA;IAEAA;IAA6BA;IAAKA;IAClCA;IAEAA;IAA6BA;IAAWA;IAExCA;IAGFA;;;;;IAVEA;IAAAA;IAGAA;IAAAA;IAIAA;IAAAA;;;;AD9BR,OAAM,MAAOC,YAAP,CAAmB;EAkBvBC,YAAoBC,OAApB,EAAiDC,oBAAjD,EAA2F;IAAvE;IAjBpB,aAAQ,eAAR;IACA,iBAAwB,EAAxB;IAEA,gBAAW,EAAX;IAOA,eAAU,EAAV;IACA,YAAO,EAAP;IAOE,MAAMC,OAAO,GAAkC;MAC7CC,WAAW,EAAE;QAACC,GAAG,EAAE,EAAN;QAAUC,GAAG,EAAE;MAAf,CADgC;MAE7CC,MAAM,EAAE;QAACF,GAAG,EAAE,EAAN;QAAUC,GAAG,EAAE;MAAf,CAFqC;MAG7CE,UAAU,EAAEC,MAAM,CAACC,IAAP,CAAYC,UAAZ,CAAuBC;IAHU,CAA/C;IAKA,KAAKC,kBAAL,GAA0BX,oBAAoB,CAACY,KAArB,CAA2BX,OAA3B,EAAoCY,IAApC,CAAyCnB,GAAG,CAACoB,QAAQ,IAAIA,QAAQ,CAACC,MAAtB,CAA5C,CAA1B;EACD;;EAEDC,QAAQ,IAAK;;EAEbC,OAAO,CAACC,KAAD,EAAc;IACnB,KAAKC,QAAL,GAAgBD,KAAhB;IACA,KAAKE,gBAAL,CAAsB,KAAKD,QAA3B;EACD;;EAEDE,cAAc,CAACF,QAAD,EAAiB;IAC7B,KAAKpB,OAAL,CAAauB,OAAb,CAAqBH,QAArB,EAA+BN,IAA/B,CAAoCnB,GAAG,CAAE6B,GAAD,IAASC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeH,GAAf,CAAX,CAAV,CAAvC,EAAmFI,SAAnF,CAA6F;MAC3FC,IAAI,EAAEd,QAAQ,IAAG;QACfe,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqChB,QAArC;;QACA,IAAG,KAAKiB,SAAL,CAAeC,MAAf,GAAwB,CAA3B,EAA6B;UAC3B,KAAKD,SAAL,CAAeE,IAAf,CAAoB,IAAItC,QAAJ,CAAamB,QAAQ,CAACK,QAAtB,EAAgCL,QAAQ,CAACoB,QAAzC,EAAmDpB,QAAQ,CAACqB,SAA5D,EAAuErB,QAAQ,CAACsB,OAAhF,EAAyFtB,QAAQ,CAACuB,MAAlG,CAApB;QACD,CAFD,MAEK;UACH,KAAKN,SAAL,CAAeO,KAAf;UACA,KAAKP,SAAL,CAAeE,IAAf,CAAoB,IAAItC,QAAJ,CAAamB,QAAQ,CAACK,QAAtB,EAAgCL,QAAQ,CAACoB,QAAzC,EAAmDpB,QAAQ,CAACqB,SAA5D,EAAuErB,QAAQ,CAACsB,OAAhF,EAAyFtB,QAAQ,CAACuB,MAAlG,CAApB;QACD;;QAED,KAAKE,iBAAL,CAAuBzB,QAAQ,CAACoB,QAAhC,EAA0CpB,QAAQ,CAACqB,SAAnD;MACD,CAX0F;MAY3FK,KAAK,EAAEA,KAAK,IAAG;QACbX,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBU,KAAxB;MACD;IAd0F,CAA7F;EAgBD;;EAEDpB,gBAAgB,CAACD,QAAD,EAAiB;IAC/B,KAAKpB,OAAL,CAAa0C,uBAAb,CAAqCtB,QAArC,EAA+CQ,SAA/C,CAAyD;MACvDC,IAAI,EAAEd,QAAQ,IAAG;QACf,IAAGA,QAAH,EAAY;UACV,KAAKO,cAAL,CAAoBF,QAApB;QACD,CAFD,MAEK;UACHuB,KAAK,CAAC,2BAAD,CAAL;QACD;MACF,CAPsD;MAQvDF,KAAK,EAAEA,KAAK,IAAG;QACbX,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBU,KAAxB;MACD;IAVsD,CAAzD;EAYD;;EAEDD,iBAAiB,CAACpC,GAAD,EAAcwC,IAAd,EAA0B;IACzC,KAAKC,MAAL,GAAc;MACZzC,GAAG,EAAEA,GADO;MAEZC,GAAG,EAAEuC;IAFO,CAAd;IAIA,KAAKE,OAAL,CAAaZ,IAAb,CAAkB;MAChBa,QAAQ,EAAE;QACR3C,GAAG,EAAEA,GADG;QAERC,GAAG,EAAEuC;MAFG;IADM,CAAlB;EAMD;;EAEDI,OAAO,CAACC,KAAD,EAAiC;IACtC,IAAIA,KAAK,CAACC,MAAN,IAAgB,IAApB,EAA0B,KAAKL,MAAL,GAAeI,KAAK,CAACC,MAAN,CAAaC,MAAb,EAAf;EAC3B;;EACDC,IAAI,CAACH,KAAD,EAAiC;IACjC,IAAIA,KAAK,CAACC,MAAN,IAAgB,IAApB,EAA0B,KAAKG,OAAL,GAAeJ,KAAK,CAACC,MAAN,CAAaC,MAAb,EAAf;EAC7B;;AAtFsB;;;mBAAZrD,cAAYD;AAAA;;;QAAZC;EAAYwD;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;;;MCZzB7D,+BAA4B,CAA5B,EAA4B,KAA5B,EAA4B,CAA5B,EAA4B,CAA5B,EAA4B,OAA5B,EAA4B,CAA5B;MAEiCA;MAASA;MAEtCA;MAAuBA;MAAQA;MAC/BA;MAGOA;QAAAA;;QAAA;;QAAA,OAAeA,sCAAf;MAAsC,CAAtC;MAHPA;MAMJA;MACAA,+BAAiB,EAAjB,EAAiB,KAAjB,EAAiB,CAAjB,EAAiB,EAAjB,EAAiB,YAAjB,EAAiB,CAAjB;MAIgBA;QAAA,OAAY8D,mBAAZ;MAA2B,CAA3B,EAA4B,cAA5B,EAA4B;QAAA,OACZA,gBADY;MACA,CAD5B;MAEV9D;MAGAA;;MAGFA;MAGJA,gCAAiB,EAAjB,EAAiB,KAAjB,EAAiB,CAAjB;MAEIA;MACAA;MACEA;MAeFA;;;;MA/BYA;MAAAA,oCAAiB,MAAjB,EAAiB8D,QAAjB;MAGqB9D;MAAAA;MAGLA;MAAAA;MAWFA;MAAAA","names":["map","Postcode","i0","AppComponent","constructor","service","mapDirectionsService","request","destination","lat","lng","origin","travelMode","google","maps","TravelMode","DRIVING","directionsResults$","route","pipe","response","result","ngOnInit","onEnter","value","postcode","validatePostcode","getDataFromAPI","getData","res","JSON","parse","stringify","subscribe","next","console","log","postcodes","length","push","latitude","longitude","country","region","shift","changePositionMap","error","validatePostcodeService","alert","long","center","markers","position","moveMap","event","latLng","toJSON","move","display","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\User\\Desktop\\Jessica\\Development\\postcodes\\postcodes-app\\src\\app\\app.component.ts","C:\\Users\\User\\Desktop\\Jessica\\Development\\postcodes\\postcodes-app\\src\\app\\app.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AppServiceService } from './app-service.service';\nimport { map} from 'rxjs/operators';\nimport { Postcode } from './shared/postcode.model';\nimport { Observable } from 'rxjs';\nimport { MapDirectionsService } from '@angular/google-maps';\n\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n})\nexport class AppComponent implements OnInit{\n  title = 'postcodes-app';\n  postcodes: Postcode[] = [];\n  display: any;\n  postcode = '';\n  control!: {};\n\n\n  //maps\n  center!: google.maps.LatLngLiteral;\n  airportLondon!: google.maps.LatLngLiteral;\n  markers = []  as  any;\n  zoom = 14;\n\n  //instatiate google map objects for directions \n  readonly directionsResults$!: Observable<google.maps.DirectionsResult | undefined>;\n\n\n  constructor(private service : AppServiceService, mapDirectionsService: MapDirectionsService){\n    const request: google.maps.DirectionsRequest = {\n      destination: {lat: 12, lng: 4},\n      origin: {lat: 14, lng: 8},\n      travelMode: google.maps.TravelMode.DRIVING\n    }\n    this.directionsResults$ = mapDirectionsService.route(request).pipe(map(response => response.result));\n  }\n\n  ngOnInit() {}\n\n  onEnter(value: string) {\n    this.postcode = value;\n    this.validatePostcode(this.postcode);\n  }\n\n  getDataFromAPI(postcode: string){\n    this.service.getData(postcode).pipe(map((res) => JSON.parse(JSON.stringify(res)))).subscribe({\n      next: response => {\n        console.log('Response from API is ', response);\n        if(this.postcodes.length < 3){\n          this.postcodes.push(new Postcode(response.postcode, response.latitude, response.longitude, response.country, response.region));\n        }else{\n          this.postcodes.shift();\n          this.postcodes.push(new Postcode(response.postcode, response.latitude, response.longitude, response.country, response.region));\n        }\n        \n        this.changePositionMap(response.latitude, response.longitude);\n      }, \n      error: error => {\n        console.log('Error is', error);\n      }\n    })\n  }\n\n  validatePostcode(postcode: string){\n    this.service.validatePostcodeService(postcode).subscribe({\n      next: response => {\n        if(response){\n          this.getDataFromAPI(postcode);\n        }else{\n          alert('Enter a valid postal code')\n        }\n      }, \n      error: error => {\n        console.log('Error is', error);\n      }\n    });\n  }\n\n  changePositionMap(lat: number, long: number){\n    this.center = {\n      lat: lat,\n      lng: long\n    }\n    this.markers.push({\n      position: {\n        lat: lat,\n        lng: long\n      }\n    })\n  }\n\n  moveMap(event: google.maps.MapMouseEvent) {\n    if (event.latLng != null) this.center = (event.latLng.toJSON());\n  }\n  move(event: google.maps.MapMouseEvent) {\n      if (event.latLng != null) this.display = event.latLng.toJSON();\n  }\n}\n","<div class=\"form-group row\">\n  <div class=\"col-xs-12\">\n    <label class=\"control-label\">Postcode:</label>\n\n    <label class=\"sr-only\">Postcode</label>\n    <input type=\"postcode\" class=\"form-control\"\n           id=\"inputPassword2\" placeholder=\"Postcode\"\n           #postcode\n           (keyup.enter)=\"onEnter(postcode.value)\">\n  </div>\n</div>\n<br>\n<div class=\"row\">\n  <div class=\"col-xs-12\">\n    <google-map height=\"400px\" width=\"1140px\"\n                [center]=\"center\" [zoom]=\"zoom\"\n                (mapClick)=\"moveMap($event)\"\n                (mapMousemove)=\"move($event)\">\n      <map-marker *ngFor=\"let marker of markers\"\n                  [position]=\"marker.position\">\n      </map-marker>\n      <map-directions-renderer *ngIf=\"(directionsResults$ | async) as directionsResults\"\n                               [directions]=\"directionsResults\">\n      </map-directions-renderer>\n    </google-map>\n  </div>\n</div>\n<div class=\"row\">\n  <div class=\"col-xs-12\">\n    <hr>\n    <ul class=\"list-group\">\n      <a class=\"list-group-item\" style=\"cursor: pointer\"\n         *ngFor=\"let postcode of postcodes\">\n\n        <label class=\"control-label\">postcode:</label>\n        {{ postcode.postcode }}\n\n        <label class=\"control-label\">Lat.:</label>\n        ({{ postcode.latitude\n        }})\n        <label class=\"control-label\">Longitude.:</label>\n\n        {{\n        postcode.longitude }}\n\n      </a>\n    </ul>\n  </div>\n\n</div>"]},"metadata":{},"sourceType":"module"}